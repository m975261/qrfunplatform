<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Winner Modal Test - Universal Browser Compatibility</title>
    <style>
        body {
            font-family: system-ui, -apple-system, sans-serif;
            background: linear-gradient(135deg, #ff7e5f, #feb47b);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            margin: 0;
            padding: 20px;
        }
        .test-container {
            background: white;
            border-radius: 16px;
            padding: 32px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
            text-align: center;
            max-width: 500px;
        }
        .test-button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 16px 32px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            margin: 10px;
            min-height: 48px;
        }
        .test-button:hover {
            background: #45a049;
        }
        #status {
            margin: 20px 0;
            padding: 16px;
            background: #f0f0f0;
            border-radius: 8px;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üß™ Winner Modal Test</h1>
        <p>Test the universal winner modal across all browsers including iOS Safari</p>
        
        <button class="test-button" onclick="testWinnerModal()">
            üèÜ Show Winner Modal
        </button>
        
        <button class="test-button" onclick="testModalStyles()" style="background: #2196F3;">
            üé® Test Modal Styles
        </button>
        
        <div id="status">Ready to test...</div>
    </div>

    <script>
        function updateStatus(message) {
            document.getElementById('status').textContent = message;
            console.log('üß™', message);
        }

        function testWinnerModal() {
            updateStatus('Creating winner modal...');
            
            // Test data
            const winner = 'Alice';
            const rankings = [
                { nickname: 'Alice' },
                { nickname: 'Bob' },
                { nickname: 'Charlie' },
                { nickname: 'Diana' }
            ];
            
            // Remove any existing modal
            const existing = document.getElementById('winner-modal');
            if (existing) existing.remove();
            
            // Create modal container
            const modal = document.createElement('div');
            modal.id = 'winner-modal';
            modal.style.cssText = `
                position: fixed !important;
                top: 0 !important;
                left: 0 !important;
                width: 100% !important;
                height: 100% !important;
                background-color: rgba(0, 0, 0, 0.8) !important;
                display: flex !important;
                justify-content: center !important;
                align-items: center !important;
                z-index: 10000 !important;
                font-family: system-ui, -apple-system, sans-serif !important;
            `;
            
            // Create modal content
            const content = document.createElement('div');
            content.style.cssText = `
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
                border-radius: 16px !important;
                padding: 32px !important;
                text-align: center !important;
                color: white !important;
                max-width: 90% !important;
                width: 400px !important;
                box-shadow: 0 20px 40px rgba(0,0,0,0.5) !important;
            `;
            
            // Trophy icon
            const trophy = document.createElement('div');
            trophy.textContent = 'üèÜ';
            trophy.style.cssText = `
                font-size: 48px !important;
                margin-bottom: 16px !important;
            `;
            
            // Winner title
            const title = document.createElement('h2');
            title.textContent = `${winner} Wins!`;
            title.style.cssText = `
                font-size: 28px !important;
                margin: 0 0 16px 0 !important;
                font-weight: bold !important;
            `;
            
            // Rankings section
            const rankingsDiv = document.createElement('div');
            rankingsDiv.style.cssText = `
                background: rgba(255,255,255,0.2) !important;
                border-radius: 12px !important;
                padding: 20px !important;
                margin: 20px 0 !important;
            `;
            
            const rankingsTitle = document.createElement('h3');
            rankingsTitle.textContent = 'Final Rankings:';
            rankingsTitle.style.cssText = `
                margin: 0 0 16px 0 !important;
                font-size: 18px !important;
            `;
            
            rankingsDiv.appendChild(rankingsTitle);
            
            // Add each ranking
            rankings.forEach((player, index) => {
                const rankItem = document.createElement('div');
                rankItem.textContent = `${index + 1}${index === 0 ? 'st' : index === 1 ? 'nd' : index === 2 ? 'rd' : 'th'} - ${player.nickname}`;
                rankItem.style.cssText = `
                    padding: 8px 0 !important;
                    font-size: 16px !important;
                    font-weight: ${index === 0 ? 'bold' : 'normal'} !important;
                    border-bottom: ${index < rankings.length - 1 ? '1px solid rgba(255,255,255,0.3)' : 'none'} !important;
                `;
                rankingsDiv.appendChild(rankItem);
            });
            
            // Buttons container
            const buttonsDiv = document.createElement('div');
            buttonsDiv.style.cssText = `
                display: flex !important;
                gap: 12px !important;
                margin-top: 24px !important;
            `;
            
            // Play Again button
            const playAgainBtn = document.createElement('button');
            playAgainBtn.textContent = 'Play Again';
            playAgainBtn.style.cssText = `
                flex: 1 !important;
                background: #4CAF50 !important;
                color: white !important;
                border: none !important;
                padding: 16px !important;
                border-radius: 8px !important;
                font-size: 16px !important;
                font-weight: bold !important;
                cursor: pointer !important;
                min-height: 48px !important;
            `;
            playAgainBtn.onclick = () => {
                modal.remove();
                updateStatus('Play Again clicked - would reload game');
            };
            
            // Home button
            const homeBtn = document.createElement('button');
            homeBtn.textContent = 'Home';
            homeBtn.style.cssText = `
                flex: 1 !important;
                background: #f44336 !important;
                color: white !important;
                border: none !important;
                padding: 16px !important;
                border-radius: 8px !important;
                font-size: 16px !important;
                font-weight: bold !important;
                cursor: pointer !important;
                min-height: 48px !important;
            `;
            homeBtn.onclick = () => {
                modal.remove();
                updateStatus('Home clicked - would go to main page');
            };
            
            // Assemble modal
            buttonsDiv.appendChild(playAgainBtn);
            buttonsDiv.appendChild(homeBtn);
            
            content.appendChild(trophy);
            content.appendChild(title);
            content.appendChild(rankingsDiv);
            content.appendChild(buttonsDiv);
            
            modal.appendChild(content);
            
            // Add to document
            document.body.appendChild(modal);
            updateStatus('Winner modal displayed! Check all elements work on this browser.');
            
            console.log('üèÜ Winner modal created with elements:', {
                trophy: trophy.textContent,
                title: title.textContent,
                rankings: rankings.length,
                buttons: ['Play Again', 'Home']
            });
        }
        
        function testModalStyles() {
            updateStatus('Testing modal style compatibility...');
            
            // Test various CSS properties that might fail on iOS Safari
            const testDiv = document.createElement('div');
            testDiv.style.cssText = `
                position: fixed;
                top: 50px;
                left: 50px;
                width: 200px;
                height: 150px;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                border-radius: 16px;
                display: flex;
                justify-content: center;
                align-items: center;
                color: white;
                font-weight: bold;
                z-index: 9999;
                box-shadow: 0 20px 40px rgba(0,0,0,0.5);
            `;
            testDiv.textContent = 'Style Test ‚úÖ';
            document.body.appendChild(testDiv);
            
            setTimeout(() => {
                testDiv.remove();
                updateStatus('Style test complete - all CSS properties working');
            }, 3000);
        }
        
        // Browser detection for debugging
        function detectBrowser() {
            const ua = navigator.userAgent;
            let browser = 'Unknown';
            
            if (ua.includes('Safari') && !ua.includes('Chrome')) {
                browser = 'Safari';
            } else if (ua.includes('Chrome')) {
                browser = 'Chrome';
            } else if (ua.includes('Firefox')) {
                browser = 'Firefox';
            }
            
            return {
                browser,
                mobile: /Mobile|iPhone|iPad|iPod|Android/i.test(ua),
                iOS: /iPhone|iPad|iPod/i.test(ua),
                userAgent: ua
            };
        }
        
        // Initialize
        window.addEventListener('load', () => {
            const browserInfo = detectBrowser();
            updateStatus(`Ready! Browser: ${browserInfo.browser} ${browserInfo.mobile ? '(Mobile)' : '(Desktop)'} ${browserInfo.iOS ? 'iOS' : ''}`);
            
            console.log('üîç Browser detection:', browserInfo);
        });
    </script>
</body>
</html>